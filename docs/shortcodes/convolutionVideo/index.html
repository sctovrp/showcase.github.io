<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Convolución aplicada a un video #  Definición del problema #  Dado un archivo de imagen, se le debe realizar un enmascaramiento visual, que resulte en la aplicación de un efecto mediante el uso de máscaras de convolución.
Sustento teórico #  Procesamiento de imágenes #  Debemos empezar definiendo una imagen digital como una función bidimensional donde se tiene un número finito de elementos llamados píxeles, cada uno de ellos teniendo una localización y valor definidos."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Convolución aplicada a un video #  Definición del problema #  Dado un archivo de imagen, se le debe realizar un enmascaramiento visual, que resulte en la aplicación de un efecto mediante el uso de máscaras de convolución.
Sustento teórico #  Procesamiento de imágenes #  Debemos empezar definiendo una imagen digital como una función bidimensional donde se tiene un número finito de elementos llamados píxeles, cada uno de ellos teniendo una localización y valor definidos."><meta property="og:type" content="article"><meta property="og:url" content="https://sctovrp.github.io/showcase.github.io/docs/shortcodes/convolutionVideo/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-04-05T22:49:05-05:00"><title>Convolution Video | Presentación</title><link rel=manifest href=/showcase.github.io/manifest.json><link rel=icon href=/showcase.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase.github.io/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcase.github.io/flexsearch.min.js></script>
<script defer src=/showcase.github.io/en.search.min.fb2adb0cfe4a6308349e0d1e61cf70b0b6b752b11ff6826b3780fb0375c118e3.js integrity="sha256-+yrbDP5KYwg0ng0eYc9wsLa3UrEf9oJrN4D7A3XBGOM=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase.github.io/><span>Presentación</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/showcase.github.io/docs/shortcodes/convolution/>Convolution</a></li><li><a href=/showcase.github.io/docs/shortcodes/convolutionVideo/ class=active>Convolution Video</a></li></ul></li></ul><ul><li><a href=/showcase.github.io/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Convolution Video</strong>
<label for=toc-control><img src=/showcase.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#convolución-aplicada-a-un-video>Convolución aplicada a un video</a><ul><li><a href=#definición-del-problema>Definición del problema</a></li><li><a href=#sustento-teórico>Sustento teórico</a></li><li><a href=#procesamiento-de-imágenes>Procesamiento de imágenes</a><ul><li><a href=#qué-es-una-máscara-de-convolución>¿Qué es una máscara de convolución?</a></li><li><a href=#difuminado-gaussiano>Difuminado gaussiano</a></li></ul></li><li><a href=#implementación-de-la-convolución>Implementación de la convolución</a><ul><li><a href=#conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro</a></li></ul></li></ul></li><li><a href=#uso-de-función-creada-por-el-estudiante>Uso de función creada por el estudiante</a></li></ul></nav></aside></header><article class=markdown><h1 id=convolución-aplicada-a-un-video>Convolución aplicada a un video
<a class=anchor href=#convoluci%c3%b3n-aplicada-a-un-video>#</a></h1><h2 id=definición-del-problema>Definición del problema
<a class=anchor href=#definici%c3%b3n-del-problema>#</a></h2><p>Dado un archivo de imagen, se le debe realizar un enmascaramiento visual, que resulte en la aplicación de un efecto mediante el uso de máscaras de convolución.</p><h2 id=sustento-teórico>Sustento teórico
<a class=anchor href=#sustento-te%c3%b3rico>#</a></h2><h2 id=procesamiento-de-imágenes>Procesamiento de imágenes
<a class=anchor href=#procesamiento-de-im%c3%a1genes>#</a></h2><p>Debemos empezar definiendo una imagen digital como una función bidimensional donde se tiene un número finito de elementos llamados píxeles, cada uno de ellos teniendo una localización y valor definidos.</p><p>Con esto en mente podemos definir el procesamiento de imágenes como el reconocimiento de imágenes 2D, 3D y secuencias de imágenes, análisis, manipulación, transmisión y otras áreas relacionadas, todas ellas haciendo uso de un algoritmo preestablecido. Dentro de las áreas que abarca esta área nos interesa la del procesamiento del color.</p><p>Fuente: <a href=http://alojamientos.us.es/gtocoma/pid/introduccion.html>Procesamiento de imágenes digitales</a></p><h3 id=qué-es-una-máscara-de-convolución>¿Qué es una máscara de convolución?
<a class=anchor href=#qu%c3%a9-es-una-m%c3%a1scara-de-convoluci%c3%b3n>#</a></h3><p>Con el fin de realizar un procesamiento del color que poseen las imágenes digitales, se hace uso de la convolución. Esta se define como el proceso de añadir cada elemento de la imagen a sus vecinos locales, luego de ser operados por un kernel. Esta operación no es una operación corriente de multiplicación de matrices, sino que se define de la siguiente manera:</p><link rel=stylesheet href=/showcase.github.io/katex/katex.min.css><script defer src=/showcase.github.io/katex/katex.min.js></script>
<script defer src=/showcase.github.io/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\[(\begin{bmatrix}
a & b & c\\
d & e & f\\
g & h & i\\
\end{bmatrix}
*
\begin{bmatrix}
1 & 2 & 3\\
4 & 5 & 6\\
7 & 8 & 9\\
\end{bmatrix})
[2, 2] =
(i \cdot 1) +
(h \cdot 2) +
(g \cdot 3) +
(f \cdot 4) +
(e \cdot 5) +
(d \cdot 6) +
(c \cdot 7) +
(b \cdot 8) +
(a \cdot 9)\]</span><p>Tenemos que la matriz de la derecha es nuestro kernel, la de la izquierda es una porción de la imagen, la operación seria invertir alguna de las dos matrices (normalmente suele ser el kernel). Arriba se hace un ejemplo rápido para las coordenadas <span>\([2, 2]\)</span></p><p>Generalmente podríamos hablar que en términos de sumatorias, la convolución se describe como:</p><span>\[\begin{bmatrix}
x_{11} & x_{12} & \cdots & x_{1n}\\
x_{21} & x_{22} & \cdots & x_{21}\\
\vdots & \vdots & \ddots & \vdots\\
x_{n1} & x_{n3} & \cdots & x_{mn}\\
\end{bmatrix}
*
\begin{bmatrix}
y_{11} & y_{12} & \cdots & y_{1n}\\
y_{21} & y_{22} & \cdots & y_{21}\\
\vdots & \vdots & \ddots & \vdots\\
y_{n1} & y_{n3} & \cdots & y_{mn}\\
\end{bmatrix}
=
\sum_{i=0}^{m-1}\sum_{i=0}^{n-1}x_{(m-i)(n-j)} \cdot y_{(1-i)(1-j)}\]</span><h3 id=difuminado-gaussiano>Difuminado gaussiano
<a class=anchor href=#difuminado-gaussiano>#</a></h3><p>Mediante la implementación de la convolución podemos aplicar efectos a las imágenes digitales objetivos, en esta ocasión hemos decidió aplicar el difuminado gaussiano. En esta caso, como manejamos dos dimensiones en las operaciones, la formula se describe de la siguiente forma:</p><span>\[G(x, y) = \dfrac{1}{\sqrt{2 \pi \sigma}}\exp(-\dfrac{x^2 + y^2}{2 \sigma^2})\]</span><p>Esto nos permite generar un kernel que aplica de forma más eficiente el efecto a causa de los valores más exactos. Por ejemplo:</p><span>\[\begin{bmatrix}
0.00296902 & 0.0133062 & 0.0219382 & 0.0133062 & 0.00296902 \\
0.0133062 & 0.0596343 & 0.0983203 & 0.0596343 & 0.0133062 \\
0.0219382 & 0.0983203 & 0.162103 & 0.0983203 & 0.0219382 \\
0.0133062 & 0.0596343 & 0.0983203 & 0.0596343 & 0.0133062 \\
0.00296902 & 0.0133062 & 0.0219382 & 0.0133062 & 0.00296902 \\
\end{bmatrix}\]</span><p>Fuente: <a href=https://en.wikipedia.org/wiki/Gaussian_blur>Gaussian blur</a></p><h2 id=implementación-de-la-convolución>Implementación de la convolución
<a class=anchor href=#implementaci%c3%b3n-de-la-convoluci%c3%b3n>#</a></h2><p>Empezamos por revisar la función que genera el kernel gaussiano, la cual recibe un tamaño del kernel, un sigma y una constante multiplicativa k. En esta ocasión los valores serán de 11, 11 y 1 respectivamente. La función se basa en esta <a href=https://www.geeksforgeeks.org/gaussian-filter-generation-c/>implementación</a>.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>gaussKernel</span>(<span style=color:#a6e22e>size</span>, <span style=color:#a6e22e>sigma</span>, <span style=color:#a6e22e>k</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>kernel</span> <span style=color:#f92672>=</span> [...Array(<span style=color:#a6e22e>size</span>)].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>e</span> =&gt; Array(<span style=color:#a6e22e>size</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>value</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> (<span style=color:#a6e22e>size</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>-</span> (<span style=color:#a6e22e>size</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.0</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>exp</span>(((Math.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>x</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>2</span>)) <span style=color:#f92672>/</span> ((<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>sigma</span>, <span style=color:#ae81ff>2</span>)))) <span style=color:#f92672>*</span> (<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>size</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>kernel</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>/=</span> <span style=color:#a6e22e>sum</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>kernel</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></label></div><p>Ahora procedemos a cargar el video y preparar lo para aplicarle el efecto.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>preload</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>createVideo</span>(<span style=color:#e6db74>&#34;../../../fingers.mov&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>setup</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>320</span>, <span style=color:#ae81ff>240</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>draw</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>pause</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gaussFilter</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>loop</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></label></div><p>Ahora si, la implementación de la convolución plantea que se deban recorrer cada uno de los píxeles de los canales presentes en la video (en este caso, son cuatro: Red, Green, Blue, Alpha) y estos multiplicarlos con los valores que se encuentran en el kernel gaussiano que tengamos creado, para luego de haber hecho esto, se actualicen los valores de la imagen.</p><p>Para esto implementamos una función gaussFilter() que cargue el arreglo de pixeles y los envíe a la función convolution(), para luego poder modificar los valores en la video.</p><p>Es importante mencionar que en este caso, el video está siendo procesado frame por frame para seguir con la misma lógica que manejábamos en la implementación a imágenes.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>gaussFilter</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sigma</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>11</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>matrix</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>gaussKernel</span>(<span style=color:#ae81ff>11</span>, <span style=color:#a6e22e>sigma</span>, <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>convolution</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>video</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>loc</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>x</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>c</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>stroke</span>(<span style=color:#a6e22e>c</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>point</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></label></div><p>Ahora en la función convolution(), la cual recibe las posiciones de los arreglos de los pixeles a modificar, el kernel como una matriz y el frame para poder obtener los valores a retornar de los pixeles ya con el efecto aplicado.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>convolution</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>matrix</span>, <span style=color:#a6e22e>video</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rTotal</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>gTotal</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>bTotal</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>matrix</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>matrix</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>matrix</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>xloc</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>h</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>yloc</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>h</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>loc</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>yloc</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>xloc</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>xloc</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>xloc</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>yloc</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>yloc</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>height</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>rTotal</span> <span style=color:#f92672>+=</span> (<span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>loc</span>]) <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>gTotal</span> <span style=color:#f92672>+=</span> (<span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>loc</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>]) <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>bTotal</span> <span style=color:#f92672>+=</span> (<span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>loc</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>]) <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>];
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>rTotal</span>, <span style=color:#a6e22e>gTotal</span>, <span style=color:#a6e22e>bTotal</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></label></div><h3 id=conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro
<a class=anchor href=#conclusiones-y-trabajo-futuro>#</a></h3><p>Podemos concluir que la aplicación de una máscara a través de la implementación de una convolución sobre una video a cada uno de los frames es realizable, fácil de comprender matemáticamente, pero que es posible que requiera de una implementación paralela para poder obtener valores de forma más rápida, esto se acentúa más, ya que tiene que renderizar cada uno de los frames modificados y al se una implementación secuencial.</p><h1 id=uso-de-función-creada-por-el-estudiante>Uso de función creada por el estudiante
<a class=anchor href=#uso-de-funci%c3%b3n-creada-por-el-estudiante>#</a></h1><p>Esta implementación de convolución la realizamos de forma secuencial, acá podemos apreciar que con los valores ingresados, el efecto es mucho más notorio, y por lo tanto, es más versátil para permitir graduar acorde el contexto que tan intenso es el efecto.</p><p>También recordar que es más lenta la visualización del video y es altamente posible que se demore en renderizar.</p><script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
<script src=../../../sketches/convolutionVideo.js></script><div id=convolutionVideo></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/3d604f0bad53d022d4055cab82d002d16cc7d4d6 title="Last modified by Sebastian Tovar | April 6, 2022" target=_blank rel=noopener><img src=/showcase.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 6, 2022</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#convolución-aplicada-a-un-video>Convolución aplicada a un video</a><ul><li><a href=#definición-del-problema>Definición del problema</a></li><li><a href=#sustento-teórico>Sustento teórico</a></li><li><a href=#procesamiento-de-imágenes>Procesamiento de imágenes</a><ul><li><a href=#qué-es-una-máscara-de-convolución>¿Qué es una máscara de convolución?</a></li><li><a href=#difuminado-gaussiano>Difuminado gaussiano</a></li></ul></li><li><a href=#implementación-de-la-convolución>Implementación de la convolución</a><ul><li><a href=#conclusiones-y-trabajo-futuro>Conclusiones y trabajo futuro</a></li></ul></li></ul></li><li><a href=#uso-de-función-creada-por-el-estudiante>Uso de función creada por el estudiante</a></li></ul></nav></div></aside></main></body></html>